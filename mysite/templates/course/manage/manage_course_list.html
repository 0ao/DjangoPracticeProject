{% extends "ArticleManage/base.html" %}

{% load staticfiles %}

{% block title %}manage courses{% endblock %}

{% block content %}
<div class="container">
{% include "ArticleManage/leftslider.html" %}
<div class="col-md-10">
    <div class='text-right'><a href="{% url 'course:create_course' %}"><button type="button" class="btn btn-primary">添加课程</button></a></div>
    <table class="table table-hover" style="margin-top:10px">
    	<tr>
    		<td>序号</td>
        <td>课程标题</td>
        <td>发布日期</td>
    		<td>操作</td>
    	</tr>
    	{% for course in courses %}
    	<tr id={{ forloop.counter }}>
    		<td>{{ forloop.counter }}</td>
    		<td>{{ course.title }}</a></td>
    		<td>{{ course.created|date:"Y-m-d" }}</td>
    		<td>
    		    <a name="edit" href="javascript:"><span class="glyphicon glyphicon-pencil"></span></a>
    		    <!-- <a nane="delete" href="{% url 'course:delete_course' course.id %}" ><span class="glyphicon glyphicon-trash" style="margin-left:20px;"></span></a> -->
            <a nane="delete" href="javascript:" onclick="submit('{% url "course:delete_course" course.id %}')" ><span class="glyphicon glyphicon-trash" style="margin-left:20px;"></span></a>
    		</td>
    	</tr>
    	{% endfor %}
    </table>
<!-- {% include "ArticleManage/article/pagination.html" %} -->
</div>
</div>
<script type="text/javascript">
function submit(action_url) {
    if(!confirm('确认要执行这个操作？')) {
        return false;
    }
    var f = $('<form method="post"></form>');
    var xsrf = $("{% csrf_token %}");
    f.append(xsrf);
    f.prop('action', action_url);
    f.submit();
}
</script>
{% endblock %}
